### RBAC MTLS User provided certificates example 
##
## The following is an example inventory file of the configuration required for setting up a kafka cluster with RBAC mTLS enabled.  We have removed all comments from
## the standard inventory example to help with understanding the formatting.

all:
  vars:
    ansible_connection: ssh
    ansible_user: ec2-user
    ansible_become: true
    ansible_ssh_private_key_file: /home/ec2-user/guest.pem
    health_checks_enabled: true 
    ssl_enabled: true
    ssl_mutual_auth_enabled: true
    ssl_custom_certs: true
    ssl_ca_cert_filepath: "/home/ec2-user/repos/tools/generated_ssl_files/confluent-root-certificate.crt"
    rbac_enabled: true
    mtls_ldap_internal_map_rule: |
      RULE:^.*[Cc][Nn]=([a-zA-Z0-9-.]*).*$/$1/L, \
      DEFAULT
    mtls_ldap_external_map_rule: |
      RULE:^.*[Cc][Nn]=([a-zA-Z0-9-.]*).*$/$1/L, \
      DEFAULT
    token_services_public_pem_file: /home/ec2-user/keys/public.pem
    token_services_private_pem_file: /home/ec2-user/keys/tokenKeypair.pem
    mds_super_user: mds
    mds_super_user_password: password
    rbac_ldap_url: ip-10-0-0-43.eu-west-2.compute.internal
    rbac_ldap_port: 636
    rbac_ldap_principal: mds
    rbac_ldap_princiapl_password: password
    rbac_ldap_user_search_base: OU=rbac,DC=example,DC=com
    rbac_ldap_group_search_base: OU=rbac,DC=example,DC=com
    rbac_ldaps: true
zookeeper:
  hosts:
    ip-10-0-0-250.eu-west-2.compute.internal:
    ip-10-0-0-239.eu-west-2.compute.internal:
    ip-10-0-0-19.eu-west-2.compute.internal:

kafka_broker:
  hosts:
    ip-10-0-0-38.eu-west-2.compute.internal:
      kafka_broker_custom_listeners:
        client_listener:
          name: Token
          port: 9093
          ssl_enabled: true
          ssl_mutual_auth_enabled: true
          sasl_protocol: OAUTH
      ssl_signed_cert_filepath: "/home/ec2-user/repos/tls_generation/generated_ssl_files/ip-10-0-0-38.eu-west-2.compute.internal-server.crt"
      ssl_key_filepath: "/home/ec2-user/repos/tls_generation/generated_ssl_files/ip-10-0-0-38.eu-west-2.compute.internal-server-private-key.key"
      ssl_key_password: password
      rbac_principal_name: ip-10-0-0-38.eu-west-2.compute.internal
      rbac_principal_password: password
    ip-10-0-0-160.eu-west-2.compute.internal:
      kafka_broker_custom_listeners:
        client_listener:
          name: Token
          port: 9093
          ssl_enabled: true
          ssl_mutual_auth_enabled: true
          sasl_protocol: OAUTH
      ssl_signed_cert_filepath: "/home/ec2-user/repos/tls_generation/generated_ssl_files/ip-10-0-0-160.eu-west-2.compute.internal-server.crt"
      ssl_key_filepath: "/home/ec2-user/repos/tls_generation/generated_ssl_files/ip-10-0-0-160.eu-west-2.compute.internal-server-private-key.key"
      ssl_key_password: password
      rbac_principal_name: ip-10-0-0-160.eu-west-2.compute.internal
      rbac_principal_password: password
    ip-10-0-0-136.eu-west-2.compute.internal:
      kafka_broker_custom_listeners:
        client_listener:
          name: Token
          port: 9093
          ssl_enabled: true
          ssl_mutual_auth_enabled: true
          sasl_protocol: OAUTH
      ssl_signed_cert_filepath: "/home/ec2-user/repos/tls_generation/generated_ssl_files/ip-10-0-0-136.eu-west-2.compute.internal-server.crt"
      ssl_key_filepath: "/home/ec2-user/repos/tls_generation/generated_ssl_files/ip-10-0-0-136.eu-west-2.compute.internal-server-private-key.key"
      ssl_key_password:
      rbac_principal_name: ip-10-0-0-136.eu-west-2.compute.internal
      rbac_principal_password: password

schema_registry:
  hosts:
    ip-10-0-0-235.eu-west-2.compute.internal:
      ssl_signed_cert_filepath: "/home/ec2-user/repos/tls_generation/generated_ssl_files/ip-10-0-0-235.eu-west-2.compute.internal-server.crt"
      ssl_key_filepath: "/home/ec2-user/repos/tls_generation/generated_ssl_files/ip-10-0-0-235.eu-west-2.compute.internal-server-private-key.key"
      ssl_key_password:
      rbac_principal_name: ip-10-0-0-235.eu-west-2.compute.internal
      rbac_principal_password: password

kafka_connect:
  hosts:
    ip-10-0-0-29.eu-west-2.compute.internal:
      ssl_signed_cert_filepath: "/home/ec2-user/repos/tls_generation/generated_ssl_files/ip-10-0-0-29.eu-west-2.compute.internal-server.crt"
      ssl_key_filepath: "/home/ec2-user/repos/tools/generated_ssl_files/ip-10-0-0-29.eu-west-2.compute.internal-server-private-key.key"
      ssl_key_password:
      rbac_principal_name: ip-10-0-0-29.eu-west-2.compute.internal
      rbac_principal_password: password
    ip-10-0-0-22.eu-west-2.compute.internal:
      ssl_signed_cert_filepath: "/home/ec2-user/repos/tools/generated_ssl_files/ip-10-0-0-22.eu-west-2.compute.internal-server.crt"
      ssl_key_filepath: "/home/ec2-user/repos/tools/generated_ssl_files/ip-10-0-0-22.eu-west-2.compute.internal-server-private-key.key"
      ssl_key_password:
      rbac_principal_name: ip-10-0-0-22.eu-west-2.compute.internal
      rbac_principal_password: password

kafka_rest:
  hosts:
    ip-10-0-0-74.eu-west-2.compute.internal:
      ssl_signed_cert_filepath: "/home/ec2-user/repos/tools/generated_ssl_files/ip-10-0-0-74.eu-west-2.compute.internal-server.crt"
      ssl_key_filepath: "/home/ec2-user/repos/tools/generated_ssl_files/ip-10-0-0-74.eu-west-2.compute.internal-server-private-key.key"
      ssl_key_password:
      rbac_principal_name: ip-10-0-0-74.eu-west-2.compute.internal
      rbac_principal_password: password

ksql:
  hosts:
    ip-10-0-0-181.eu-west-2.compute.internal:
      ssl_signed_cert_filepath: "/home/ec2-user/repos/tls_generation/generated_ssl_files/ip-10-0-0-181.eu-west-2.compute.internal-server.crt"
      ssl_key_filepath: "/home/ec2-user/repos/generated_ssl_files/ip-10-0-0-181.eu-west-2.compute.internal-server-private-key.key"
      ssl_key_password:
      rbac_principal_name: ip-10-0-0-181.eu-west-2.compute.internal
      rbac_principal_password: password

control_center:
  hosts:
    ip-10-0-0-237.eu-west-2.compute.internal:
      ssl_signed_cert_filepath: "/home/ec2-user/repos/generated_ssl_files/ip-10-0-0-237.eu-west-2.compute.internal-server.crt"
      ssl_key_filepath: "/home/ec2-user/repos/tls_generation/generated_ssl_files/ip-10-0-0-237.eu-west-2.compute.internal-server-private-key.key"
      ssl_key_password:
      rbac_principal_name: ip-10-0-0-237.eu-west-2.compute.internal
      rbac_principal_password: password
