### RBAC MTLS User provided keystores and truststores 
##
## The following is an example inventory file of the configuration required for setting up a kafka cluster with RBAC mTLS enabled.  We have removed all comments from
## the standard inventory example to help with understanding the formatting.

all:
  vars:
    ansible_connection: ssh
    ansible_user: ec2-user
    ansible_become: true
    ansible_ssh_private_key_file: /home/ec2-user/.ssh/guest.pem
    health_checks_enabled: true
    ssl_enabled: true
    ssl_mutual_auth_enabled: true
    ssl_custom_certs: true
    ssl_ca_cert_filepath: "/home/ec2-user/repos/generated_ssl_files/confluent-root-certificate.crt"
    rbac_enabled: true
    mtls_ldap_internal_map_rule: |
      RULE:^.*[Cc][Nn]=([a-zA-Z0-9-.]*).*$/$1/L, \
      DEFAULT
    mtls_ldap_external_map_rule: |
      RULE:^.*[Cc][Nn]=([a-zA-Z0-9-.]*).*$/$1/L, \
      DEFAULT
    token_services_public_pem_file: /home/ec2-user/keys/public.pem
    token_services_private_pem_file: /home/ec2-user/keys/tokenKeypair.pem
    mds_super_user: mds
    mds_super_user_password: password
    rbac_ldap_url: ip-10-0-0-43.eu-west-2.compute.internal
    rbac_ldap_port: 636
    rbac_ldap_principal: mds
    rbac_ldap_principal_password: password
    rbac_ldap_user_search_base: OU=rbac,DC=example,DC=com
    rbac_ldap_group_search_base: OU=rbac,DC=example,DC=com
    rbac_ldaps: true
    schema_registry_ldap_user: schema_registry
    schema_registry_ldap_password: passowrd
    kafka_connect_ldap_user: connect_worker
    kafka_connect_ldap_password: password
    ksql_ldap_user: ksql
    ksql_ldap_password: password
    kafka_rest_ldap_user: rest_proxy
    kafka_rest_password: password
    control_center_ldap_user: control_center
    control_center_ldap_password: password

zookeeper:
  hosts:
    ip-10-0-0-250.eu-west-2.compute.internal:
    ip-10-0-0-239.eu-west-2.compute.internal:
    ip-10-0-0-19.eu-west-2.compute.internal:

kafka_broker:
  hosts:
    ip-10-0-0-38.eu-west-2.compute.internal:
      kafka_broker_custom_listeners:
        client_listener:
          name: Token
          port: 9093
          ssl_enabled: true
          ssl_mutual_auth_enabled: true
          sasl_protocol: OAUTH
      ssl_keystore_filepath: "/home/ec2-user/repos/generated_ssl_files/ip-10-0-0-41.eu-west-2.compute.internal.keystore.jks"
      ssl_keystore_key_password: password
      ssl_keystore_store_password: password
      ssl_truststore_filepath: "/home/ec2-user/repos/generated_ssl_files/ip-10-0-0-41.eu-west-2.compute.internal.truststore.jks"
      ssl_truststore_password: password
     
    ip-10-0-0-160.eu-west-2.compute.internal:
      kafka_broker_custom_listeners:
        client_listener:
          name: Token
          port: 9093
          ssl_enabled: true
          ssl_mutual_auth_enabled: true
          sasl_protocol: OAUTH
      ssl_keystore_filepath: "/home/ec2-user/repos/generated_ssl_files/ip-10-0-0-141.eu-west-2.compute.internal.keystore.jks"
      ssl_keystore_key_password: password
      ssl_keystore_store_password: password
      ssl_truststore_filepath: "/home/ec2-user/repos/generated_ssl_files/ip-10-0-0-141.eu-west-2.compute.internal.truststore.jks"
      ssl_truststore_password: password
     
    ip-10-0-0-136.eu-west-2.compute.internal:
      kafka_broker_custom_listeners:
        client_listener:
          name: Token
          port: 9093
          ssl_enabled: true
          ssl_mutual_auth_enabled: true
          sasl_protocol: OAUTH
      ssl_keystore_filepath: "/home/ec2-user/repos/generated_ssl_files/ip-10-0-0-148.eu-west-2.compute.internal.keystore.jks"
      ssl_keystore_key_password: password
      ssl_keystore_store_password: password
      ssl_truststore_filepath: "/home/ec2-user/repos/generated_ssl_files/ip-10-0-0-148.eu-west-2.compute.internal.truststore.jks"
      ssl_truststore_password: password

schema_registry:
  hosts:
    ip-10-0-0-235.eu-west-2.compute.internal:
      ssl_keystore_filepath: "/home/ec2-user/repos/generated_ssl_files/ip-10-0-0-152.eu-west-2.compute.internal.keystore.jks"
      ssl_keystore_key_password: password
      ssl_keystore_store_password: password
      ssl_truststore_filepath: "/home/ec2-user/repos/generated_ssl_files/ip-10-0-0-152.eu-west-2.compute.internal.truststore.jks"
      ssl_truststore_password: password

kafka_connect:
  hosts:
    ip-10-0-0-29.eu-west-2.compute.internal:
      ssl_keystore_filepath: "/home/ec2-user/repos/generated_ssl_files/ip-10-0-0-83.eu-west-2.compute.internal.keystore.jks"
      ssl_keystore_key_password: password
      ssl_keystore_store_password: password
      ssl_truststore_filepath: "/home/ec2-user/repos/generated_ssl_files/ip-10-0-0-83.eu-west-2.compute.internal.truststore.jks"
      ssl_truststore_password: password
  
    ip-10-0-0-22.eu-west-2.compute.internal:
      ssl_keystore_filepath: "/home/ec2-user/repos/generated_ssl_files/ip-10-0-0-225.eu-west-2.compute.internal.keystore.jks"
      ssl_keystore_key_password: password
      ssl_keystore_store_password: password
      ssl_truststore_filepath: "/home/ec2-user/repos/generated_ssl_files/ip-10-0-0-225.eu-west-2.compute.internal.truststore.jks"
      ssl_truststore_password: password

kafka_rest:
  hosts:
    ip-10-0-0-74.eu-west-2.compute.internal:
      ssl_keystore_filepath: "/home/ec2-user/repos/generated_ssl_files/ip-10-0-0-43.eu-west-2.compute.internal.keystore.jks"
      ssl_keystore_key_password: password
      ssl_keystore_store_password: password
      ssl_truststore_filepath: "/home/ec2-user/repos/generated_ssl_files/ip-10-0-0-43.eu-west-2.compute.internal.truststore.jks"
      ssl_truststore_password: password

ksql:
  hosts:
    ip-10-0-0-181.eu-west-2.compute.internal:
      ssl_keystore_filepath: "/home/ec2-user/repos/generated_ssl_files/ip-10-0-0-86.eu-west-2.compute.internal.keystore.jks"
      ssl_keystore_key_password: password
      ssl_keystore_store_password: password
      ssl_truststore_filepath: "/home/ec2-user/repos/generated_ssl_files/ip-10-0-0-86.eu-west-2.compute.internal.truststore.jks"
      ssl_truststore_password: password

control_center:
  hosts:
    ip-10-0-0-237.eu-west-2.compute.internal:
      ssl_keystore_filepath: "/home/ec2-user/repos/generated_ssl_files/ip-10-0-0-125.eu-west-2.compute.internal.keystore.jks"
      ssl_keystore_key_password: password
      ssl_keystore_store_password: password
      ssl_truststore_filepath: "/home/ec2-user/repos/generated_ssl_files/ip-10-0-0-125.eu-west-2.compute.internal.truststore.jks"
      ssl_truststore_password: password
     